import itertools
from marshmallow.exceptions import ValidationError
import marshmallow_dataclass
import os
import pytest

from setgame.setgame import Card

FIXTURE_DIR = os.path.join(os.path.dirname(__file__), 'fixtures')

CardSchema = marshmallow_dataclass.class_schema(Card)()

_deck = "[{'color': 'RED', 'shading': 'STRIPED', 'number': 'THREE', 'shape': 'SQUIGGLE'}, {'color': 'GREEN', 'shading': 'EMPTY', 'number': 'TWO', 'shape': 'OVAL'}, {'color': 'RED', 'shading': 'SOLID', 'number': 'TWO', 'shape': 'SQUIGGLE'}, {'color': 'GREEN', 'shading': 'EMPTY', 'number': 'ONE', 'shape': 'SQUIGGLE'}, {'color': 'RED', 'shading': 'EMPTY', 'number': 'THREE', 'shape': 'OVAL'}, {'color': 'RED', 'shading': 'EMPTY', 'number': 'THREE', 'shape': 'DIAMOND'}, {'color': 'BLUE', 'shading': 'EMPTY', 'number': 'TWO', 'shape': 'SQUIGGLE'}, {'color': 'BLUE', 'shading': 'SOLID', 'number': 'THREE', 'shape': 'SQUIGGLE'}, {'color': 'BLUE', 'shading': 'EMPTY', 'number': 'TWO', 'shape': 'DIAMOND'}, {'color': 'RED', 'shading': 'EMPTY', 'number': 'TWO', 'shape': 'SQUIGGLE'}, {'color': 'BLUE', 'shading': 'EMPTY', 'number': 'TWO', 'shape': 'OVAL'}, {'color': 'BLUE', 'shading': 'SOLID', 'number': 'THREE', 'shape': 'DIAMOND'}, {'color': 'RED', 'shading': 'SOLID', 'number': 'ONE', 'shape': 'SQUIGGLE'}, {'color': 'RED', 'shading': 'STRIPED', 'number': 'ONE', 'shape': 'OVAL'}, {'color': 'BLUE', 'shading': 'STRIPED', 'number': 'ONE', 'shape': 'DIAMOND'}, {'color': 'RED', 'shading': 'SOLID', 'number': 'THREE', 'shape': 'DIAMOND'}, {'color': 'GREEN', 'shading': 'EMPTY', 'number': 'TWO', 'shape': 'DIAMOND'}, {'color': 'BLUE', 'shading': 'EMPTY', 'number': 'THREE', 'shape': 'DIAMOND'}, {'color': 'RED', 'shading': 'STRIPED', 'number': 'THREE', 'shape': 'DIAMOND'}, {'color': 'GREEN', 'shading': 'STRIPED', 'number': 'TWO', 'shape': 'SQUIGGLE'}, {'color': 'GREEN', 'shading': 'STRIPED', 'number': 'THREE', 'shape': 'OVAL'}, {'color': 'BLUE', 'shading': 'STRIPED', 'number': 'THREE', 'shape': 'OVAL'}, {'color': 'GREEN', 'shading': 'SOLID', 'number': 'ONE', 'shape': 'SQUIGGLE'}, {'color': 'RED', 'shading': 'EMPTY', 'number': 'THREE', 'shape': 'SQUIGGLE'}, {'color': 'BLUE', 'shading': 'EMPTY', 'number': 'ONE', 'shape': 'DIAMOND'}, {'color': 'RED', 'shading': 'SOLID', 'number': 'ONE', 'shape': 'OVAL'}, {'color': 'BLUE', 'shading': 'SOLID', 'number': 'TWO', 'shape': 'DIAMOND'}, {'color': 'GREEN', 'shading': 'STRIPED', 'number': 'ONE', 'shape': 'DIAMOND'}, {'color': 'RED', 'shading': 'SOLID', 'number': 'TWO', 'shape': 'DIAMOND'}, {'color': 'GREEN', 'shading': 'STRIPED', 'number': 'THREE', 'shape': 'SQUIGGLE'}, {'color': 'BLUE', 'shading': 'EMPTY', 'number': 'ONE', 'shape': 'OVAL'}, {'color': 'RED', 'shading': 'EMPTY', 'number': 'TWO', 'shape': 'DIAMOND'}, {'color': 'GREEN', 'shading': 'EMPTY', 'number': 'THREE', 'shape': 'DIAMOND'}, {'color': 'GREEN', 'shading': 'STRIPED', 'number': 'ONE', 'shape': 'OVAL'}, {'color': 'GREEN', 'shading': 'EMPTY', 'number': 'ONE', 'shape': 'OVAL'}, {'color': 'RED', 'shading': 'EMPTY', 'number': 'ONE', 'shape': 'OVAL'}, {'color': 'BLUE', 'shading': 'EMPTY', 'number': 'THREE', 'shape': 'SQUIGGLE'}, {'color': 'BLUE', 'shading': 'STRIPED', 'number': 'THREE', 'shape': 'DIAMOND'}, {'color': 'BLUE', 'shading': 'STRIPED', 'number': 'THREE', 'shape': 'SQUIGGLE'}, {'color': 'RED', 'shading': 'EMPTY', 'number': 'ONE', 'shape': 'SQUIGGLE'}, {'color': 'GREEN', 'shading': 'SOLID', 'number': 'ONE', 'shape': 'DIAMOND'}, {'color': 'GREEN', 'shading': 'SOLID', 'number': 'TWO', 'shape': 'DIAMOND'}, {'color': 'RED', 'shading': 'EMPTY', 'number': 'TWO', 'shape': 'OVAL'}, {'color': 'BLUE', 'shading': 'SOLID', 'number': 'THREE', 'shape': 'OVAL'}, {'color': 'BLUE', 'shading': 'SOLID', 'number': 'TWO', 'shape': 'OVAL'}, {'color': 'BLUE', 'shading': 'STRIPED', 'number': 'TWO', 'shape': 'SQUIGGLE'}, {'color': 'GREEN', 'shading': 'EMPTY', 'number': 'THREE', 'shape': 'OVAL'}, {'color': 'BLUE', 'shading': 'STRIPED', 'number': 'TWO', 'shape': 'DIAMOND'}, {'color': 'RED', 'shading': 'EMPTY', 'number': 'ONE', 'shape': 'DIAMOND'}, {'color': 'GREEN', 'shading': 'SOLID', 'number': 'THREE', 'shape': 'SQUIGGLE'}, {'color': 'BLUE', 'shading': 'SOLID', 'number': 'ONE', 'shape': 'SQUIGGLE'}, {'color': 'GREEN', 'shading': 'EMPTY', 'number': 'TWO', 'shape': 'SQUIGGLE'}, {'color': 'RED', 'shading': 'STRIPED', 'number': 'THREE', 'shape': 'OVAL'}, {'color': 'BLUE', 'shading': 'STRIPED', 'number': 'ONE', 'shape': 'SQUIGGLE'}, {'color': 'GREEN', 'shading': 'EMPTY', 'number': 'THREE', 'shape': 'SQUIGGLE'}, {'color': 'GREEN', 'shading': 'STRIPED', 'number': 'TWO', 'shape': 'DIAMOND'}, {'color': 'GREEN', 'shading': 'EMPTY', 'number': 'ONE', 'shape': 'DIAMOND'}, {'color': 'GREEN', 'shading': 'STRIPED', 'number': 'TWO', 'shape': 'OVAL'}, {'color': 'RED', 'shading': 'SOLID', 'number': 'THREE', 'shape': 'SQUIGGLE'}, {'color': 'BLUE', 'shading': 'STRIPED', 'number': 'TWO', 'shape': 'OVAL'}, {'color': 'RED', 'shading': 'STRIPED', 'number': 'ONE', 'shape': 'DIAMOND'}, {'color': 'GREEN', 'shading': 'SOLID', 'number': 'THREE', 'shape': 'DIAMOND'}, {'color': 'RED', 'shading': 'STRIPED', 'number': 'ONE', 'shape': 'SQUIGGLE'}, {'color': 'RED', 'shading': 'SOLID', 'number': 'ONE', 'shape': 'DIAMOND'}, {'color': 'BLUE', 'shading': 'SOLID', 'number': 'TWO', 'shape': 'SQUIGGLE'}, {'color': 'BLUE', 'shading': 'SOLID', 'number': 'ONE', 'shape': 'OVAL'}, {'color': 'BLUE', 'shading': 'EMPTY', 'number': 'THREE', 'shape': 'OVAL'}, {'color': 'BLUE', 'shading': 'SOLID', 'number': 'ONE', 'shape': 'DIAMOND'}, {'color': 'GREEN', 'shading': 'STRIPED', 'number': 'THREE', 'shape': 'DIAMOND'}, {'color': 'RED', 'shading': 'SOLID', 'number': 'TWO', 'shape': 'OVAL'}, {'color': 'GREEN', 'shading': 'STRIPED', 'number': 'ONE', 'shape': 'SQUIGGLE'}, {'color': 'BLUE', 'shading': 'EMPTY', 'number': 'ONE', 'shape': 'SQUIGGLE'}, {'color': 'RED', 'shading': 'STRIPED', 'number': 'TWO', 'shape': 'OVAL'}, {'color': 'GREEN', 'shading': 'SOLID', 'number': 'ONE', 'shape': 'OVAL'}, {'color': 'RED', 'shading': 'STRIPED', 'number': 'TWO', 'shape': 'SQUIGGLE'}, {'color': 'GREEN', 'shading': 'SOLID', 'number': 'THREE', 'shape': 'OVAL'}, {'color': 'RED', 'shading': 'SOLID', 'number': 'THREE', 'shape': 'OVAL'}, {'color': 'BLUE', 'shading': 'STRIPED', 'number': 'ONE', 'shape': 'OVAL'}, {'color': 'RED', 'shading': 'STRIPED', 'number': 'TWO', 'shape': 'DIAMOND'}, {'color': 'GREEN', 'shading': 'SOLID', 'number': 'TWO', 'shape': 'OVAL'}, {'color': 'GREEN', 'shading': 'SOLID', 'number': 'TWO', 'shape': 'SQUIGGLE'}]"

@pytest.fixture
def shuffled_deck():
    with open(os.path.join(FIXTURE_DIR, 'deck1.txt')) as file:
        cards = CardSchema.loads(file.read(), many=True)
        return cards